<section class="card shadow-sm border-0">
  <div class="card-body">
    <h1 class="h4 mb-3">{{title}}</h1>
    <div het-component="het-props-write-error">
      <p
        id="error-target"
        het-ref="target"
        het-props="customValue=count"
        class="mb-0 text-muted">
        pending
      </p>
    </div>
    <p id="error-message" class="mb-0 text-muted">No error</p>
  </div>
</section>
<script nonce="{{{cspNonce}}}">
  window.HET.registerComponent('het-props-write-error', {
    setup: ({ refs, signals }) => {
      Object.defineProperty(refs.target, 'customValue', {
        configurable: true,
        set: () => {
          throw new Error('HET test error: write failed');
        },
      });
      signals.count = 1;
      return {};
    },
  });
  window.addEventListener('load', () => {
    const message = window.hetErrors.at(-1);
    if (message) {
      document.getElementById('error-message').textContent = message;
    }
  });
</script>
