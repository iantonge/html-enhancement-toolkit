<section class="card shadow-sm border-0">
  <div class="card-body">
    <h1 class="h4 mb-3">{{title}}</h1>
    <div het-component="imports-grandparent" het-exports="count">
      <div het-component="imports-parent" het-exports="count">
        <button id="increment-nearest" type="button" het-on="click=increment" class="btn btn-sm btn-primary">
          Increment nearest
        </button>
        <div het-component="imports-child" het-imports="count">
          <p id="nearest-value" het-props="textContent=count" class="mb-0 mt-2 text-muted"></p>
        </div>
      </div>
    </div>
  </div>
</section>
<script nonce="{{{cspNonce}}}">
  window.HET.registerComponent('imports-grandparent', {
    setup: ({ signals }) => {
      signals.count = window.HET.signal(99);
      return {};
    },
  });

  window.HET.registerComponent('imports-parent', {
    setup: ({ signals }) => {
      signals.count = window.HET.signal(0);
      return {
        increment: () => {
          signals.count.value += 1;
        },
      };
    },
  });

  window.HET.registerComponent('imports-child', {
    setup: ({ signals }) => {
      if (!signals.count) {
        throw new Error('HET test error: missing imported count');
      }
      return {};
    },
  });
</script>
